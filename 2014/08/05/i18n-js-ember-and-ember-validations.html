<html>
  <head>
    <meta charset='utf-8'>
    <meta content='IE-edge,chrome=1' http-equiv='X-UA-Compatible'>
    <meta content='width=device-width, initial-scale=1.0' name='viewport'>
    <title>
      Tips for Making I18n-js Play Nicely with Ember and Ember Validations
    </title>
    <link href="../../../stylesheets/all.css" media="screen" rel="stylesheet" type="text/css" />
    <script src="../../../javascripts/all.js" type="text/javascript"></script>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      
      ga('create', 'UA-283660-36', 'blurb.github.io');
      ga('send', 'pageview');
    </script>
  </head>
  <body class='x2014 x2014_08 x2014_08_05 x2014_08_05_i18n-js-ember-and-ember-validations'>
    <header class='header sticky' data-min-height='100' data-starting-height='200'>
      <nav class='top-bar' data-topbar>
        <ul class='title-area'>
          <li class='name'>
            <h3>
                        <a href="/"><img alt="Blurb Engineering Blog" src="../../../images/logo.png" />
              </a>
    
            </h3>
          </li>
        </ul>
        <section class='top-bar-section'>
          <ul class='nav-links'>
            <li>
              <a href="http://www.github.com/blurb">Github</a>
            </li>
            <li>
              <a href="/blog">Blog</a>
            </li>
          </ul>
        </section>
      </nav>
      <div class='row'>
        <div class='columns large-8 large-centered'>
          <h1>Tips for Making I18n-js Play Nicely with Ember and Ember Validations</h1>
        </div>
      </div>
    </header>
    <section id='main'>
      <div class='row'>
        <div class='columns large-12 large-centered'>
          <article>
            <p>Ember's handlebars helpers don't like having too many arguments (it allows you to have one argument and an options hash). It also doesn't like nested calls, such as having one helper that takes the result of another helper as an argument. </p>
            
            <p>A while ago, we added a helper method for i18n-js that allows us to translate things in the view layer. In order to make the helper method handle string interpolation with nested translations (for example: translating "If you want to learn more, click #{here}", and then <code>here</code> is itself a translated link to somewhere), we make the translate helper recognize a special suffix. We called it <code>Key</code>, so any translation key that ends in <code>Key</code> represents a nested translation (such as <code>hereKey</code> for the earlier example).</p>
            
            <p>Then, we translate the key before passing it in for string interpolation as part of the original translation.</p>
            
            <p>The final method looks like this:</p>
            
            <p><a class="jsbin-embed" href="http://emberjs.jsbin.com/ricimiciwe/1/embed?js">Ember Starter Kit</a></p>
            
            <p>We also had some trouble using the message field in ember-validations, as it overwrites i18n and appeared to be setting the message value before we set our i18n-js locale, causing all our error messages to be stuck in english.</p>
            
            <p>We fixed it by changing the message from trying to translate the string to just returning the translation key and changing the view accordingly to handle the translation there instead.</p>
            
            <p><a class="jsbin-embed" href="http://emberjs.jsbin.com/zagapajisi/1/embed?html,js">Ember Starter Kit</a>
            <script src="http://static.jsbin.com/js/embed.js"></script></p>
          </article>
        </div>
      </div>
    </section>
    <footer>
      <hr>
      <div class='row'>
        <div class='columns large-12'>
          <ul class='inline-list'>
            <li>
              <a href='http://www.blurb.com'>Blurb</a>
            </li>
            <li>
              <a class='secondary' href='http://www.github.com/blurb'>Github</a>
            </li>
          </ul>
        </div>
      </div>
    </footer>
  </body>
</html>

